<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&family=Special+Elite&display=swap" rel="stylesheet">
  <title>Mapo's Gallery</title>
  <link rel="stylesheet" href="style.css">
  <meta name="google-site-verification" content="w5xj7-mtfIhu7HeYyJY5-fyIE4eIj_wLUhlL7CjPr8U" />
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-X6B6QJQEZT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-X6B6QJQEZT');
  </script>
  <style>
    .collections-btn {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0;
      font-size: 2rem;
      color: white;
    }
    .collections-btn svg rect {
      transition: all 0.3s ease;
    }

    /* UNIVERSAL CSS for collections overlay transition */
    .collections-overlay {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(20, 20, 20, 0.97);
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-20px);
      transition: opacity 0.4s ease, transform 0.4s ease; /* transizione universale */
    }

    .collections-overlay.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    .collections-menu {
      display: flex;
      flex-direction: column;
      gap: 30px;
      text-align: center;
    }

    .collections-menu a {
      color: white;
      font-size: 2rem;
      text-decoration: none;
      transition: 0.3s;
    }

    .collections-menu a:hover {
      color: #aaa;
    }

    .close-collections {
      position: absolute;
      top: 20px;
      right: 30px;
      font-size: 3rem;
      color: white;
      cursor: pointer;
    }

    .collections-social {
      display: flex;
      justify-content: center;
      gap: 25px;
      margin-top: 50px;
    }
    .collections-social a img {
      display: block;
      width: 40px;
      height: 40px;
    }
    :root {
      --bg-color: #f0f0f0;
      --header-color: #222;
      --text-color: white;
    }
    body {
      font-family: 'Special Elite', monospace;
      margin: 0;
      background-color: var(--bg-color);
    }
    header, footer, .collections-menu a, .header-title {
      font-family: 'Special Elite', monospace;
    }
    header {
      text-align: center;
      padding: 2rem;
      background-color: var(--header-color);
      color: var(--text-color);
    }
    .gallery {
      column-count: 4;
      column-gap: 15px;
      padding: 20px;
      overflow: visible;
    }
    .img-wrapper {
      overflow: hidden;
      margin-bottom: 15px;
    }
    .img-wrapper img {
      width: 100%;
      display: block;
      transition: transform 0.3s;
      transform-origin: center;
    }
    .img-wrapper img:hover {
      transform: scale(1.02);
    }
    @media (max-width: 820px) {
      .gallery {
        column-count: 3;
      }
    }
    @media (max-width: 500px) {
      .gallery {
        column-count: 2;
        column-gap: 13px;
        padding: 13px;
      }
      .header-flex {
        padding: 1rem;
        gap: 10px;
      }
      .header-title {
        font-size: 1.4rem;
      }
      .spotify-container iframe {
        max-width: 320px;
        height: 155px;
      }
    }
    .lightbox {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.9);
      justify-content: center;
      align-items: center;
    }
    .lightbox-img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 10px;
    }
    .close, .prev, .next {
      cursor: pointer;
      position: absolute;
      color: white;
      user-select: none;
      font-size: 40px;
    }
    .close { 
      top: 20px; 
      right: 30px; 
      color: rgba(255,255,255,0.5); 
      transition: opacity 0.3s; 
    }
    .prev, .next { top: 50%; padding: 16px; font-size: 50px; margin-top: -25px; }
    .prev { left: 20px; }
    .next { right: 20px; }
    .header-flex {
      display: flex;
      align-items: center;        /* centra verticalmente tutti gli elementi */
      justify-content: space-between; /* titolo a sinistra, menu a destra */
      padding: 2rem;
      background-color: #222;
      color: white;
    }
    .header-title {
      margin:0; 
      font-size:1.8rem;
      font-weight: 500;
    }
    .recommendations-container {
      display:flex; 
      justify-content:center; 
      align-items:flex-start; 
      gap:20px; 
      flex-wrap:wrap; 
      margin:20px;
    }
    footer {
      background-color:#222; 
      color:white; 
      text-align:center; 
      padding:25px 0; 
      display:flex; 
      justify-content:center; 
      align-items:center; 
      gap:10px; 
      flex-wrap:wrap; 
      font-size: 1.1rem;
      font-weight: 300; /* testo più sottile */
    }
    footer a {
      display:inline-flex; 
      align-items:center;
    }
    .side-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255,255,255,0.5);
      font-size: 3rem;
      pointer-events: auto;
      opacity: 0;
      transition: opacity 0.3s;
      user-select: none;
      z-index: 1010;
    }
    .lightbox:hover .side-arrow {
      opacity: 1;
    }
    .side-arrow.left { left: 20px; }
    .side-arrow.right { right: 20px; }

    .lightbox-zone {
      position: absolute;
      top: 20%;
      width: 50%;
      height: 60%;
      cursor: pointer;
    }
    .left-zone { left: 0; }
    .right-zone { right: 0; }

    .spotify-container {
      display: flex;
      justify-content: center;
      margin: 40px 0 10px 0;
    }

    .spotify-container iframe {
      width: 100%;
      max-width: 370px;
      height: 165px;
      border-radius: 12px;
    }

  @media (max-width: 500px) {
    .spotify-container iframe {
      max-width: 320px;
      height: 155px;
    }
  }
  </style>
</head>
<body>
  <header class="header-flex">
    <h1 class="header-title">Mapo's Gallery</h1>
    <button id="open-collections" class="collections-btn">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
        <rect y="4" width="24" height="2"/>
        <rect y="11" width="24" height="2"/>
        <rect y="18" width="24" height="2"/>
      </svg>
    </button>
  </header>
  <main>
    <div class="gallery">
<div class="img-wrapper"><img src="images/photo1.webp" alt="photo 1" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo2.webp" alt="photo 2" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo3.webp" alt="photo 3" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo4.webp" alt="photo 4" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo5.webp" alt="photo 5" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo6.webp" alt="photo 6" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo7.webp" alt="photo 7" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo8.webp" alt="photo 8" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo9.webp" alt="photo 9" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo10.webp" alt="photo 10" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo11.webp" alt="photo 11" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo12.webp" alt="photo 12" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo13.webp" alt="photo 13" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo14.webp" alt="photo 14" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo15.webp" alt="photo 15" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo16.webp" alt="photo 16" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo17.webp" alt="photo 17" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo18.webp" alt="photo 18" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo19.webp" alt="photo 19" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo20.webp" alt="photo 20" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo21.webp" alt="photo 21" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo22.webp" alt="photo 22" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo23.webp" alt="photo 23" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo24.webp" alt="photo 24" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo25.webp" alt="photo 25" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo26.webp" alt="photo 26" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo27.webp" alt="photo 27" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo28.webp" alt="photo 28" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo29.webp" alt="photo 29" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo30.webp" alt="photo 30" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo31.webp" alt="photo 31" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo32.webp" alt="photo 32" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo33.webp" alt="photo 33" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo34.webp" alt="photo 34" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo35.webp" alt="photo 35" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo36.webp" alt="photo 36" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo37.webp" alt="photo 37" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo38.webp" alt="photo 38" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo39.webp" alt="photo 39" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo40.webp" alt="photo 40" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo41.webp" alt="photo 41" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo42.webp" alt="photo 42" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo43.webp" alt="photo 43" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="Switzerland"></div>
<div class="img-wrapper"><img src="images/photo44.webp" alt="photo 44" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo45.webp" alt="photo 45" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo46.webp" alt="photo 46" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo47.webp" alt="photo 47" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo48.webp" alt="photo 48" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo49.webp" alt="photo 49" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo50.webp" alt="photo 50" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo51.webp" alt="photo 51" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo52.webp" alt="photo 52" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo53.webp" alt="photo 53" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo54.webp" alt="photo 54" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection="PPL"></div>
<div class="img-wrapper"><img src="images/photo55.webp" alt="photo 55" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo56.webp" alt="photo 56" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo57.webp" alt="photo 57" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo58.webp" alt="photo 58" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo59.webp" alt="photo 59" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
<div class="img-wrapper"><img src="images/photo60.webp" alt="photo 60" loading="lazy" oncontextmenu="return false;" draggable="false" data-collection=""></div>
    </div>
  </main>
  <div id="collections-overlay" class="collections-overlay">
    <span class="close-collections">&times;</span>
    <div class="collections-menu">
      <!-- I link delle collezioni saranno generati dinamicamente via JS -->
    </div>
    <div class="collections-social">
      <!-- Instagram ufficiale -->
      <a href="https://www.instagram.com/giovannirs_16" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg" alt="Instagram" width="40" height="40">
      </a>
      <!-- WhatsApp -->
      <a href="https://wa.me/393314316133" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" width="40" height="40">
      </a>
    </div>
  </div>
  <div class="spotify-container">
    <iframe id="spotify-player"
      frameborder="0"
      allowtransparency="true"
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
      loading="lazy">
    </iframe>
  </div>

  <script defer>
    // Lista di link Spotify
    const tracks = [
      "https://open.spotify.com/embed/track/7FAFkQQZFeNwOFzTrSDFIh?utm_source=generator",
      "https://open.spotify.com/embed/track/6xV7Be6XEvkSnighmh2Tzj?utm_source=generator",
      "https://open.spotify.com/embed/track/5KUNwkaNf8l5A9sXZhiCgI?utm_source=generator",
      "https://open.spotify.com/embed/track/1QPreu0BNOrUfEb8HTd2qG?utm_source=generator",
      "https://open.spotify.com/embed/track/2cGxRwrMyEAp8dEbuZaVv6?utm_source=generator",
      "https://open.spotify.com/embed/track/0d28khcov6AiegSCpG5TuT?utm_source=generator",
      "https://open.spotify.com/embed/track/2f3TSWcQlu8sRr5ymkVRFl?utm_source=generator",
      "https://open.spotify.com/embed/track/28qA8y1sz0FTuSapsCxNOG?utm_source=generator",
      "https://open.spotify.com/embed/track/4hGOZFnihN22IsswyRpueW?utm_source=generator",
      "https://open.spotify.com/embed/track/5DBmXF7QO43Cuy9yqva116?utm_source=generator",
      "https://open.spotify.com/embed/track/2LMkwUfqC6S6s6qDVlEuzV?utm_source=generator",
      "https://open.spotify.com/embed/track/3GZD6HmiNUhxXYf8Gch723?utm_source=generator",
      "https://open.spotify.com/embed/track/3xKsf9qdS1CyvXSMEid6g8?utm_source=generator",
      "https://open.spotify.com/embed/track/3WbuQIjkR1mIKdwSNlgqpp?utm_source=generator",
      "https://open.spotify.com/embed/track/3DK6m7It6Pw857FcQftMds?utm_source=generator",
      "https://open.spotify.com/embed/track/3ZOEytgrvLwQaqXreDs2Jx?utm_source=generator",
      "https://open.spotify.com/embed/track/2zYzyRzz6pRmhPzyfMEC8s?utm_source=generator",
      "https://open.spotify.com/embed/track/0vFOzaXqZHahrZp6enQwQb?utm_source=generator",
      "https://open.spotify.com/embed/track/64BbK9SFKH2jk86U3dGj2P?utm_source=generator",
      "https://open.spotify.com/embed/track/1Is8hGpkGMiePASAxBluxM?utm_source=generator",
      "https://open.spotify.com/embed/track/6NMtzpDQBTOfJwMzgMX0zl?utm_source=generator",
      "https://open.spotify.com/embed/track/0y9uTzK9cNKSAEHnpeRG8C?utm_source=generator",
      "https://open.spotify.com/embed/track/1hz7SRTGUNAtIQ46qiNv2p?utm_source=generator",
      "https://open.spotify.com/embed/track/2t8yVaLvJ0RenpXUIAC52d?utm_source=generator",
      "https://open.spotify.com/embed/track/5bJ1DrEM4hNCafcDd1oxHx?utm_source=generator",
      "https://open.spotify.com/embed/track/6GnhWMhgJb7uyiiPEiEkDA?utm_source=generator",
      "https://open.spotify.com/embed/track/6dFn6my1sHK2bcf23GlHwM?utm_source=generator",
      "https://open.spotify.com/embed/track/410ZZP746AQeiywhKvXWCo?utm_source=generator",
      "https://open.spotify.com/embed/track/1REVvAphiSTJyKQ1fDpHa4?utm_source=generator"
    ];

    // Scegli un link a caso
    const randomTrack = tracks[Math.floor(Math.random() * tracks.length)];

    // Inserisci il link nell'iframe
    document.getElementById("spotify-player").src = randomTrack;
  </script>
  <div id="lightbox" class="lightbox">
    <span class="close">&times;</span>
    <img class="lightbox-img" src="" alt="">
    <span class="side-arrow left">‹</span>
    <span class="side-arrow right">›</span>
    <div class="lightbox-zone left-zone"></div>
    <div class="lightbox-zone right-zone"></div>
  </div>
  <script defer>
  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  const galleryContainer = document.querySelector('.gallery');
  const items = Array.from(galleryContainer.children);
  const shuffled = shuffle(items);
  shuffled.forEach(item => galleryContainer.appendChild(item));

  const gallery = document.querySelectorAll('.gallery img');
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.querySelector('.lightbox-img');
  const closeBtn = document.querySelector('.close');
  let currentIndex = 0;

  gallery.forEach((img, index) => {
    img.addEventListener('click', () => {
      lightbox.style.display = 'flex';
      lightboxImg.src = img.src;
      currentIndex = index;
    });
  });

  const closeLightbox = () => { lightbox.style.display = 'none'; };
  closeBtn.addEventListener('click', closeLightbox);
  lightbox.addEventListener('click', (e) => {
    if(e.target === lightbox) closeLightbox();
  });
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape') closeLightbox();
    // Navigazione con frecce quando la lightbox è aperta
    if(lightbox.style.display === 'flex') {
      if(e.key === 'ArrowLeft') {
        currentIndex = (currentIndex - 1 + gallery.length) % gallery.length;
        lightboxImg.src = gallery[currentIndex].src;
      } else if(e.key === 'ArrowRight') {
        currentIndex = (currentIndex + 1) % gallery.length;
        lightboxImg.src = gallery[currentIndex].src;
      }
    }
  });

  // Clic sui lati destro/sinistro dell'immagine per scorrere
  lightboxImg.addEventListener('click', (e) => {
    const rect = lightboxImg.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    if(clickX < rect.width / 2){
      // clic lato sinistro → image precedente
      currentIndex = (currentIndex - 1 + gallery.length) % gallery.length;
    } else {
      // clic lato destro → image successiva
      currentIndex = (currentIndex + 1) % gallery.length;
    }
    lightboxImg.src = gallery[currentIndex].src;
  });

  gallery.forEach(img => {
    if(img.naturalWidth > img.naturalHeight) {
      img.parentElement.classList.add("landscape");
    }
  });
// Impedisci il menu contestuale sul lightbox (immagine ingrandita)
document.addEventListener("contextmenu", function(e) {
  // Solo se il lightbox è visibile e il bersaglio è dentro il lightbox
  const lightbox = document.getElementById('lightbox');
  if (lightbox && lightbox.style.display === 'flex' && lightbox.contains(e.target)) {
    e.preventDefault();
  }
});
</script>
  <footer>
  <span>© Giovanni Russo</span>
</footer>
<script defer>
  const sideArrows = document.querySelectorAll('.side-arrow');
  let arrowTimeout;

  function showArrowsTemporarily() {
    sideArrows.forEach(arrow => arrow.style.opacity = '1');
    if (arrowTimeout) clearTimeout(arrowTimeout);
    arrowTimeout = setTimeout(() => {
      sideArrows.forEach(arrow => arrow.style.opacity = '0');
    }, 2000);
  }

  // Mostra le frecce all'apertura della lightbox
  gallery.forEach(img => {
    img.addEventListener('click', () => {
      showArrowsTemporarily();
    });
  });

  // Riavvia il timer anche al cambio image tramite click sui lati
  lightboxImg.addEventListener('click', (e) => {
    const rect = lightboxImg.getBoundingClientRect();
    const clickX = e.clientX - rect.left;
    if(clickX < rect.width / 2){
      currentIndex = (currentIndex - 1 + gallery.length) % gallery.length;
    } else {
      currentIndex = (currentIndex + 1) % gallery.length;
    }
    lightboxImg.src = gallery[currentIndex].src;
  });

  // Frecce cliccabili sul lightbox
  const leftArrow = document.querySelector('.side-arrow.left');
  const rightArrow = document.querySelector('.side-arrow.right');

  leftArrow.addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + gallery.length) % gallery.length;
    lightboxImg.src = gallery[currentIndex].src;
  });

  rightArrow.addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % gallery.length;
    lightboxImg.src = gallery[currentIndex].src;
  });

  // Overlay zone click handlers
  const leftZone = document.querySelector('.left-zone');
  const rightZone = document.querySelector('.right-zone');

  leftZone.addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + gallery.length) % gallery.length;
    lightboxImg.src = gallery[currentIndex].src;
  });

  rightZone.addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % gallery.length;
    lightboxImg.src = gallery[currentIndex].src;
  });
</script>
</body>
<script>
const overlay = document.getElementById('collections-overlay');
const openBtn = document.getElementById('open-collections');
const overlayCloseBtn = document.querySelector('.close-collections');
const collectionsMenu = document.querySelector('.collections-menu');
const allImages = document.querySelectorAll('.gallery img');

// Recupera tutte le collezioni presenti nelle immagini
let allCollections = [...new Set(Array.from(allImages).map(img => img.dataset.collection).filter(c => c))];

// Definisci l'ordine desiderato
let desiredOrder = ["Switzerland", "PPL"]; // modifica qui l'ordine del menù

// Ordina le collezioni secondo l'array desiderato
let collections = desiredOrder.filter(name => allCollections.includes(name));

// Genera link delle collezioni
collectionsMenu.innerHTML = "";
collections.forEach(name => {
  const a = document.createElement('a');
  a.href = "#";
  a.textContent = name;
  a.addEventListener('click', (e) => {
    e.preventDefault();
    allImages.forEach(img => {
      if(img.dataset.collection === name){
        img.parentElement.style.display = 'block';
      } else {
        img.parentElement.style.display = 'none';
      }
    });
    overlay.classList.remove('active');
  });
  collectionsMenu.appendChild(a);
});

// Aggiungi voce "Home" in fondo
const homeItem = document.createElement('a');
homeItem.href = "#";
homeItem.textContent = "Tutte le foto";
homeItem.addEventListener('click', (e) => {
  e.preventDefault();
  allImages.forEach(img => img.parentElement.style.display = 'block');
  overlay.classList.remove('active');
});
collectionsMenu.appendChild(homeItem);

// Mostra tutte le immagini quando si chiude il menu senza selezionare nulla
function showAllImages() {
  allImages.forEach(img => img.parentElement.style.display = 'block');
}

// Gestione apertura/chiusura overlay
openBtn.addEventListener('click', () => {
  // Mostra tutte le immagini come il titolo del sito
  allImages.forEach(img => img.parentElement.style.display = 'block');
  overlay.classList.add('active');
});
overlayCloseBtn.addEventListener('click', () => { overlay.classList.remove('active'); showAllImages(); });
overlay.addEventListener('click', (e) => {
  if (e.target === overlay) { overlay.classList.remove('active'); showAllImages(); }
});
document.addEventListener('keydown', (e) => {
  if (e.key === "Escape") { overlay.classList.remove('active'); showAllImages(); }
});
</script>
</html>